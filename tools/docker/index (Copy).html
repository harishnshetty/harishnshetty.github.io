<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Dockerfile Generator with Config Editor</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 text-gray-900 min-h-screen flex flex-col lg:flex-row items-center justify-center p-6">


   <div class="w-full lg:w-80 bg-gray-50 p-6 shadow-inner lg:shadow-none lg:fixed lg:left-0 lg:top-0 lg:h-screen overflow-y-auto z-10">
    <div class="text-center">
      <h3 class="text-xl font-bold">Docker Page</h3>
<img src="img/image.png" alt="Harish N Shetty" class="w-40 h-40 rounded-2xl mx-auto mb-4 shadow-md border border-gray-300" />
      <h2 class="text-xl font-bold">Harish N Shetty</h2>
      <p class="text-sm text-gray-600 mb-2">harishnshetty ‚Ä¢ he/him</p>
      <p class="text-sm mb-4">DevOps Learner || Open Source Enthusiast || Keep learning, sharing and growing</p>

      <ul class="text-left text-sm space-y-2">
        <li><strong>Status:</strong> <span class="text-green-600">open to work</span></li>
        <li><strong>Location:</strong> Bengaluru, Karnataka, India</li>
        <li><strong>Email:</strong> <a href="mailto:harishn662@gmail.com" class="text-blue-600 underline">harishn662@gmail.com</a></li>
        <li><strong>Website:</strong> <a href="https://harishnshetty.github.io" class="text-blue-600 underline" target="_blank">Website</a></li>
        <li><strong>linkedin:</strong> <a href="https://www.linkedin.com/in/harishnshetty" class="text-blue-600 underline" target="_blank">harishnshetty</a></li>
        <li><strong>GitHub:</strong> <a href="https://github.com/harishnshetty" class="text-blue-600 underline">@harishnshetty</a></li>
        <li><strong>Youtube:</strong> <a href="https://www.youtube.com/@HarishNShetty0107" class="text-blue-600 underline">@HarishNShetty0107</a></li>
        <li><strong>Instagram:</strong> <a href="https://www.instagram.com/devopswithharish?igsh=YWc5ZzNmdzBzNjI4" class="text-blue-600 underline" target="_blank">@devopswithharish</a></li>
  <li><strong>Twitter (X):</strong> <a href="https://x.com/devopswitharish?t=SWH2zb-b8Dh4AGEm6tpwGg&s=09" class="text-blue-600 underline" target="_blank">@devopswitharish</a></li>

      </ul>

<p class="text-lg text-red-600 font-medium text-center mt-4 mx-auto max-w-2xl">
  This is an open-source generator tool. You can support ongoing development & feature improvements.
</p>
     üîí License & Usage Notice<br>
  &copy; 2025 Harish N Shetty. All rights reserved.
<ul class="text-left text-xl font-bold text-black space-y-2">
  <li>
    <strong>PayPal:</strong>
    <a href="https://paypal.me/harishnshetty" class="text-blue-700 underline font-bold">@harishnshetty</a>
  </li>
  <li>
    <strong>UPI ID:</strong> harishn662@ybl
  </li>
</ul>


            <img src="img/qr1.png" alt="Harish N Shetty" class="w-45 h-45  mx-auto mb-4">
<br> Desgin & Developed By</br><strong>Harish N Shetty</strong> 
    </div>
  </div>

<div class="flex-0 p-1 overflow-y-auto lg:ml-80"></div>
  <div class="max-w-4xl w-full bg-white rounded-xl shadow-md p-6">

<!-- Main Content -->
  <div class="flex-1 p-1 overflow-y-auto lg:ml-80"></div>
  <div class="max-w-4xl w-full bg-white rounded-xl shadow-md p-6">
    <a href="update.html" target="_blank">
      <div id="latestUpdate" class="mb-4 w-full max-w-full text-sm text-blue-800 bg-blue-100 p-3 rounded hidden cursor-pointer hover:bg-blue-200 transition">
        <div class="flex items-center gap-3">
          <i class="fas fa-bell text-blue-600"></i>
          <span id="updateMessage">Fetching updates...</span>
        </div>
      </div>
    </a>


    <h1 class="text-2xl font-bold mb-6 text-center"> [ Docker File Script Generator ]  </h1>
    
<span class="space-x-4">
    <a href="https://harishnshetty.github.io" class="text-blue-600 underline" target="_blank">Home</a>

  <a href="docker.pdf" class="text-blue-600 underline" target="_blank">Docker-PDF</a>
  <a href="https://www.youtube.com/playlist?list=PLB1yU-G7FE-ENj8uOF2wuiU_AWdvZAI7H" class="text-blue-600 underline" target="_blank">‚ñ∂Ô∏è YouTube-Playlist</a>
  <a href="https://docs.google.com/forms/d/e/1FAIpQLSe_tqab3RWclUkxWWtBKdqYp0wjoGlCawZIYDT1itX-xAnY2g/viewform?usp=dialog" class="text-blue-600 underline" target="_blank">‚úçÔ∏è Feedback-Form</a>
  <a href="https://harishnshetty.github.io/feedback/docker.html" class="text-blue-600 underline" target="_blank">ü§ùüòä Read-Feedback-Messages</a>
    <a href="lic.txt" class="text-blue-600 underline" target="_blank">üîëLICENSE</a>
</span>

<!-- Updated Dockerfile Generator UI: Includes Base Image, Entrypoint, Dockerignore Generator -->
<div class="space-y-6 mt-6">

 <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <!-- Base Image Selection -->
          <div>
            <label class="block font-medium mb-1">Base Image</label>
            <select id="baseImageSelect" class="w-full p-2 border rounded focus:ring-2 focus:ring-blue-300">
              <option value="openjdk:17-jdk-slim">Java 17 (openjdk:17-jdk-slim)</option>
              <option value="node:18-alpine">Node.js 18 (node:18-alpine)</option>
              <option value="python:3.10-slim">Python 3.10 (python:3.10-slim)</option>
              <option value="nginx:alpine">Nginx (nginx:alpine)</option>
              <option value="postgres:15-alpine">PostgreSQL 15</option>
              <option value="golang:1.20-alpine">Go 1.20</option>
              <option value="alpine:latest">Alpine (Minimal)</option>
            </select>
          </div>

  <!-- Entrypoint Script -->
  <div>
    <label class="font-semibold">Entrypoint Script:</label>
    <textarea id="entrypointScript" rows="6" class="w-full p-2 border rounded font-mono bg-gray-100 text-sm" placeholder="#!/bin/sh
exec java -jar app.jar"></textarea>
  </div>

  <!-- Dockerignore Generator -->
  <div>
    <label class="inline-flex items-center">
      <input type="checkbox" id="generateDockerignore" class="mr-2">
      Generate .dockerignore file
    </label>
    <textarea id="dockerignoreContent" rows="5" class="w-full p-2 border rounded font-mono bg-gray-100 text-sm mt-2 hidden">node_modules
.git
Dockerfile
*.tar.gz
</textarea>
  </div>

  <!-- Generate All Button -->
  <button onclick="generateAllFiles()" class="bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700">
    üöÄ Generate Dockerfile, Entrypoint, and .dockerignore
  </button>

  <!-- Output Preview -->
 <div class="mt-6">
    <label class="font-semibold">Generated Files:</label>
    <div class="relative bg-gray-200 p-4 rounded whitespace-pre-wrap mt-2 text-sm">
        <pre id="dockerfileOutput"></pre>
        <button onclick="copyToClipboard('dockerfileOutput')" class="absolute top-2 right-2 bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-1 px-2 rounded text-xs">Copy</button>
        <button onclick="downloadFile('dockerfileOutput', 'Dockerfile')" class="absolute top-2 right-14 bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-1 px-2 rounded text-xs">Download</button>
    </div>
    <div class="relative bg-gray-200 p-4 rounded whitespace-pre-wrap mt-2 text-sm">
        <pre id="entrypointOutput"></pre>
        <button onclick="copyToClipboard('entrypointOutput')" class="absolute top-2 right-2 bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-1 px-2 rounded text-xs">Copy</button>
        <button onclick="downloadFile('entrypointOutput', 'entrypoint.sh')" class="absolute top-2 right-14 bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-1 px-2 rounded text-xs">Download</button>
    </div>
    <div class="relative bg-gray-200 p-4 rounded whitespace-pre-wrap mt-2 text-sm">
        <pre id="dockerignoreOutput"></pre>
        <button onclick="copyToClipboard('dockerignoreOutput')" class="absolute top-2 right-2 bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-1 px-2 rounded text-xs">Copy</button>
        <button onclick="downloadFile('dockerignoreOutput', '.dockerignore')" class="absolute top-2 right-14 bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-1 px-2 rounded text-xs">Download</button>
    </div>
  </div>



<script>
    // Environment Variables Management
    function addEnvVar(key = '', value = '') {
      const container = document.getElementById('envVarsContainer');
      const id = 'envVar_' + Date.now();
      
      const div = document.createElement('div');
      div.className = 'flex items-center space-x-2';
      div.innerHTML = `
        <input type="text" placeholder="Key" value="${key}" class="flex-1 p-2 border rounded" id="${id}_key">
        <span>=</span>
        <input type="text" placeholder="Value" value="${value}" class="flex-1 p-2 border rounded" id="${id}_value">
        <button onclick="this.parentElement.remove()" class="text-red-500 hover:text-red-700">
          <i class="fas fa-times"></i>
        </button>
      `;
      container.appendChild(div);
    }

    // Build Arguments Management
    function addBuildArg(key = '', value = '') {
      const container = document.getElementById('buildArgsContainer');
      const id = 'buildArg_' + Date.now();
      
      const div = document.createElement('div');
      div.className = 'flex items-center space-x-2';
      div.innerHTML = `
        <input type="text" placeholder="Key" value="${key}" class="flex-1 p-2 border rounded" id="${id}_key">
        <span>=</span>
        <input type="text" placeholder="Value" value="${value}" class="flex-1 p-2 border rounded" id="${id}_value">
        <button onclick="this.parentElement.remove()" class="text-red-500 hover:text-red-700">
          <i class="fas fa-times"></i>
        </button>
      `;
      container.appendChild(div);
    }

    // Dockerignore Templates
    const dockerignoreTemplates = {
      node: `node_modules
npm-debug.log
.DS_Store
.env
.git
.gitignore
.idea
.vscode
coverage
dist
build
*.log
*.tmp
*.swp`,
      java: `target
.classpath
.project
.settings
bin
*.class
*.jar
*.war
*.ear
*.iml
.idea
.DS_Store
.git
.gitignore
.env
*.log
*.tmp
*.swp`,
      python: `__pycache__
*.pyc
*.pyo
*.pyd
.Python
env
venv
.venv
.env
.git
.gitignore
.idea
.vscode
*.log
*.tmp
*.swp
.coverage
htmlcov
dist
build
*.egg-info`,
      go: `bin
pkg
vendor
*.exe
*.test
*.out
.env
.git
.gitignore
.idea
.vscode
*.log
*.tmp
*.swp`
    };

    document.getElementById('dockerignoreTemplate').addEventListener('change', function() {
      const template = this.value;
      if (template !== 'custom') {
        document.getElementById('dockerignoreContent').value = dockerignoreTemplates[template];
      }
    });

    // Main Generation Function
    function generateAllFiles() {
      // Get all form values
      const baseImage = document.getElementById('baseImageSelect').value;
      const buildType = document.getElementById('buildType').value;
      const exposedPort = document.getElementById('exposedPort').value;
      const useNonRoot = document.getElementById('nonRootUser').checked;
      const entryScript = document.getElementById('entrypointScript').value.trim();
      const generateDockerignore = document.getElementById('generateDockerignore').checked;
      const dockerignoreContent = document.getElementById('dockerignoreContent').value.trim();
      const healthCheckCmd = document.getElementById('healthCheckCmd').value.trim();
      const healthCheckInterval = document.getElementById('healthCheckInterval').value.trim();
      const healthCheckTimeout = document.getElementById('healthCheckTimeout').value.trim();

      // Collect environment variables
      const envVars = [];
      document.querySelectorAll('#envVarsContainer > div').forEach(div => {
        const key = div.querySelector('input[id$="_key"]').value.trim();
        const value = div.querySelector('input[id$="_value"]').value.trim();
        if (key) envVars.push({ key, value });
      });

      // Collect build arguments
      const buildArgs = [];
      document.querySelectorAll('#buildArgsContainer > div').forEach(div => {
        const key = div.querySelector('input[id$="_key"]').value.trim();
        const value = div.querySelector('input[id$="_value"]').value.trim();
        if (key) buildArgs.push({ key, value });
      });

      // Generate Dockerfile based on build type
      let dockerfile = '';
      
      if (buildType === 'multistage') {
        // Multi-stage build template
        dockerfile = `# Build stage
FROM ${baseImage} AS builder
WORKDIR /app
${buildArgs.map(arg => `ARG ${arg.key}${arg.value ? `=${arg.value}` : ''}`).join('\n')}
COPY . .
RUN # Add your build commands here

# Runtime stage
FROM ${baseImage.replace(/:.*/, ':alpine')}
WORKDIR /app
${useNonRoot ? `RUN addgroup -S appgroup && adduser -S appuser -G appgroup\nUSER appuser` : ''}
COPY --from=builder /app/target ./target
${envVars.map(env => `ENV ${env.key}=${env.value}`).join('\n')}
EXPOSE ${exposedPort}
${healthCheckCmd ? `HEALTHCHECK --interval=${healthCheckInterval} --timeout=${healthCheckTimeout} --start-period=5s --retries=3 CMD ${healthCheckCmd}` : ''}
COPY entrypoint.sh /entrypoint.sh
RUN chmod +x /entrypoint.sh
ENTRYPOINT ["/entrypoint.sh"]`;
      } else if (buildType === 'production') {
        // Production optimized template
        dockerfile = `FROM ${baseImage.replace(/:.*/, ':alpine')}
WORKDIR /app
${buildArgs.map(arg => `ARG ${arg.key}${arg.value ? `=${arg.value}` : ''}`).join('\n')}
${envVars.map(env => `ENV ${env.key}=${env.value}`).join('\n')}
${useNonRoot ? `RUN addgroup -S appgroup && adduser -S appuser -G appgroup\nUSER appuser` : ''}
COPY --chown=${useNonRoot ? 'appuser:appgroup' : 'root:root'} . .
RUN # Add your build commands here
EXPOSE ${exposedPort}
${healthCheckCmd ? `HEALTHCHECK --interval=${healthCheckInterval} --timeout=${healthCheckTimeout} --start-period=5s --retries=3 CMD ${healthCheckCmd}` : ''}
COPY --chown=${useNonRoot ? 'appuser:appgroup' : 'root:root'} entrypoint.sh /entrypoint.sh
RUN chmod +x /entrypoint.sh
ENTRYPOINT ["/entrypoint.sh"]`;
      } else {
        // Simple build template
        dockerfile = `FROM ${baseImage}
WORKDIR /app
${buildArgs.map(arg => `ARG ${arg.key}${arg.value ? `=${arg.value}` : ''}`).join('\n')}
${envVars.map(env => `ENV ${env.key}=${env.value}`).join('\n')}
${useNonRoot ? `RUN addgroup -S appgroup && adduser -S appuser -G appgroup\nUSER appuser` : ''}
COPY --chown=${useNonRoot ? 'appuser:appgroup' : 'root:root'} . .
RUN # Add your build commands here
EXPOSE ${exposedPort}
${healthCheckCmd ? `HEALTHCHECK --interval=${healthCheckInterval} --timeout=${healthCheckTimeout} --start-period=5s --retries=3 CMD ${healthCheckCmd}` : ''}
COPY --chown=${useNonRoot ? 'appuser:appgroup' : 'root:root'} entrypoint.sh /entrypoint.sh
RUN chmod +x /entrypoint.sh
ENTRYPOINT ["/entrypoint.sh"]`;
      }

      // Set output content
      document.getElementById('dockerfileOutput').textContent = dockerfile;
      document.getElementById('entrypointOutput').textContent = entryScript || '# No entrypoint script generated';
      document.getElementById('dockerignoreOutput').textContent = generateDockerignore ? dockerignoreContent : '# .dockerignore generation was disabled';
    }

    // Utility functions
    function copyToClipboard(elementId) {
      const element = document.getElementById(elementId);
      navigator.clipboard.writeText(element.textContent)
        .then(() => showToast('Copied to clipboard!', 'green'))
        .catch(err => showToast('Failed to copy: ' + err, 'red'));
    }

    function downloadFile(elementId, fileName) {
      const element = document.getElementById(elementId);
      const content = element.textContent;
      if (!content || content.startsWith('# No') || content.startsWith('# .dockerignore')) {
        showToast('Nothing to download!', 'red');
        return;
      }
      
      const blob = new Blob([content], { type: 'text/plain' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = fileName;
      a.click();
      URL.revokeObjectURL(url);
      
      showToast(`Downloaded ${fileName}!`, 'green');
    }

    function showToast(message, type = 'green') {
      const toast = document.createElement('div');
      toast.className = `fixed bottom-4 right-4 px-4 py-2 rounded shadow-md z-50 flex items-center ${
        type === 'green' ? 'bg-green-600 text-white' : 'bg-red-600 text-white'
      }`;
      toast.innerHTML = `<i class="fas fa-${type === 'green' ? 'check' : 'exclamation'} mr-2"></i> ${message}`;
      document.body.appendChild(toast);
      
      setTimeout(() => {
        toast.classList.add('opacity-0', 'transition-opacity', 'duration-300');
        setTimeout(() => toast.remove(), 300);
      }, 3000);
    }

    // Initialize with some example env vars
    document.addEventListener('DOMContentLoaded', () => {
      addEnvVar('APP_ENV', 'production');
      addEnvVar('PORT', '8080');
      addBuildArg('VERSION', '1.0.0');
      
      // Set default dockerignore template
      document.getElementById('dockerignoreTemplate').dispatchEvent(new Event('change'));
      
      // Load update message
      fetchLatestUpdate();
    });

    // Update notification system
    async function fetchLatestUpdate() {
      try {
        const url = "https://script.google.com/macros/s/AKfycbxZVmJjswUOGZLNm2zR9afxjzUeSHccbW_pSXwmeaPMFVa-oJSteKwJNFWS423h5FSj/exec";
        const res = await fetch(url);
        const json = await res.json();
        const data = Array.isArray(json) ? json : json.data;

        if (Array.isArray(data) && data.length >= 2) {
          const [timestamp, message] = data[data.length - 1];
          const dateObj = new Date(timestamp);
          const formatted = dateObj.toLocaleString("en-IN", {
            dateStyle: "medium",
            timeStyle: "short"
          });

          document.getElementById("updateMessage").innerHTML = 
            `<i class="fas fa-info-circle mr-2"></i> ${formatted} - ${message}`;
          document.getElementById("latestUpdate").classList.remove("hidden");
        }
      } catch (err) {
        console.error("Update check failed:", err);
      }
    }
  </script>


<!-- 
<script>
  // Disable right-click
  document.addEventListener("contextmenu", event => event.preventDefault());
</script> -->


</body>
</html>